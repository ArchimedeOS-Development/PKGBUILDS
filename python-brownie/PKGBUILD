# Maintainer: ArchimedeOS Development Team <hi@archimedeos.org>
# Framework de développement Python pour smart contracts EVM (Ethereum)

pkgname=python-brownie
_name=brownie
pkgver=1.21.0
pkgrel=1
pkgdesc="Framework de développement et de test Python pour smart contracts EVM (Ethereum)"
arch=('any')
url="https://github.com/eth-brownie/brownie"
license=('MIT')
depends=('python' 'python-pip' 'python-web3' 'python-hypothesis' 'python-requests' 'python-packaging' 'python-setuptools')
makedepends=('git' 'python-build' 'python-installer' 'python-wheel')
optdepends=(
    'python-py-solc-x: Pour compiler des contrats Solidity'
    'solidity: Compilateur Solidity'
)
source=("git+${url}.git#tag=v${pkgver}")
sha512sums=('SKIP')

build() {
    cd "$srcdir/$_name"
    python -m build --wheel --no-isolation
}

package() {
    cd "$srcdir/$_name"
    python -m installer --destdir="$pkgdir" dist/*.whl
    
    # Installation de la licence
    install -Dm644 LICENSE "$pkgdir/usr/share/licenses/$pkgname/LICENSE"
}